# 8장 : 메서드

### 아이템 49. 매개변수가 유효한지 검사하라

- 특정 메서드를 시작할 때 매개변수를 사용한다면, 반드시 구현 시작부에서 이를 검증하라. 오류는 반드시 발생한 즉시 빠르게 확인하고 처리하는 것이 좋다.

---

### 아이템 50. 적시에 방어적 복사본을 만들라

- 우리가 처음 프로그래밍을 할 때 모든 코드를 자신이 제어할 수 있다고 믿는 경우가 종종 있다. 난 그랬었다. 하지만 메서드와 클래스를 정의할 땐 항상 이를 호출하는 클라이언트는 내가 아닌 다른 사람이라고 가정해야 한다. 본문에서도 이렇게 말한다.
    
    > *클라이언트가 여러분의 불변식을 깨뜨리려 혈안이 되어 있다고 가정하고 방어적으로 프로그래밍해야 한다.*
    > 
    - 내부에서 어떤 객체를 수정하는 행위는 생각보다 많은 버그를 가져올 수 있다. 불변 객체를 이용하는 이유는 예상치 못한 변경에 의한 버그를 막기 위해서이기도 하다.
        - `Date` 와 같은 클래스의 경우 `LocalDataTime`, `Instant`, `ZondedDateTime` 와 같은 불변 클래스를 통해 개선할 수 있다.
    - 만약 클라이언트의 불변을 깨뜨리고자 하는 위험을 막고 싶다면 **매개변수를 방어적으로 복사한 뒤 유효성 검사를 진행**하면 된다. 방어적 복사를 사용하는 이유는 원본 객체로 진행할 경우 수정과 유효성 검사를 각각 다른 스레드가 수행하며 순서가 얽히는 동시성 문제가 존재하기 때문이다.
- 즉 클래스가 클라이언트로부터 가져오거나 반환하는 요소가 가변 상태라면 ‘반드시’ 방어적 복사를 진행해야 한다. 이 때 비용이 너무 크다면 요소의 변경으로 인한 책임이 클라이언트에게 있음을 문서로 명시하자.

---