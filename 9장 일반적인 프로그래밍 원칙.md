# 9장 : 일반적인 프로그래밍 원칙

### 아이템 57. 지역변수의 범위를 최소화하라

- 지역변수의 유효 범위를 최소화하는 건 코드 가독성, 유지보수성, 오류 가능성에서 충분한 이점을 얻을 수 있다.
    - 가장 강력하면서 간단한 기법은 미리 선언하지 않고, 쓰일 때 선언하는 것이다.
    - 또한 선언 시 초기화를 미루지 않고 선언과 동시에 수행하는 것이 좋다.
- 메서드의 크기가 작아지면 자연스럽게 지역변수의 범위 역시 작아진다. 추가적으로 메서드가 한 가지 기능에만 집중할수도 있다.

---

### 아이템 58. 전통적인 for문 보다는 for-each문을 사용하라

- 사실 대용량의 데이터를 다룰 때는 for문 혹은 for-each문보다 Stream API가 효과적이지만, 아닌 경우도 많다.
    - 이런 경우 명료하고 유연하고 버그를 예방하며 성능 저하도 예상되지 않는 for-each를 사용하자.

---

### 아이템 59. 라이브러리를 익히고 사용하라

- `Random` 클래스보단 `ThreadLocalRandom` 를 사용하라. 만약 ForkJoin Pool, 병렬 스트림이라면 `SplittableRandom` 을 사용하면 된다.
- 표준 라이브러리의 장점은 명확하다.
    - 개발자가 직접 구현할 필요가 없으며, 이 시간을 애플리케이션 개발에 투자할 수 있다.
    - 언어가 발전하며 자연스럽게 성능 개선 혹은 유지보수가 이뤄진다.
    - 더군다나 자바에서 메이저 버전이 릴리즈 되는 경우는 대부분 수많은 기능들이 추가된다.
- **바퀴를 다시 발명하지 말자**

---

### 아이템 60. 정확한 답이 필요하다면 float와 double은 피하라

- 만약 금액과 관련된 계산을 해야한다면 반드시 `BigDecimal` 혹은 `int` , `long` 타입을 사용해야한다.
    - 두 타입은 이진 부동소수점 연산에 활용한다. 우리는 정확한 값으로 생각할 수 있지만 사실상 ‘근사치’에 가깝다.
    - 물론 `BigDecimal` 은 느리다. 하지만 다른 두 타입은 알다시피 허용 가능한 범위가 제한되며, 소수점을 다루는 비용도 개발자가 내야 한다.
    - 열여덟 자리가 넘어간다면 반드시 `BigDecimal` 을 사용해야한다.

---

### 아이템 61. 박싱된 기본 타입보다는 기본 타입을 사용하라

- 기본 타입을 사용해야하는 이유는 **박싱/언박싱 비용**이다.
    - 만약 컬렉션을 다룰 때 어쩔 수 없이 박싱 타입을 사용해야 한다면 `IntStream`, `LongStream` 등을 활용해 박싱 비용을 절약하자.

---

### 아이템 62. 다른 타입이 적절하다면 문자열 사용을 피하라

- 우리가 사용하는 숫자, 권한 등은 사실 숫자로 표현할 수 있다. 이런 점때문에 해당 타입들을 문자열로 표현하는 경우가 많지만 적합하지 않은 판단이다.
    - 경우에 따라 문자열을 파싱해야하며, 보안과 관련된 이슈마저 발생할 수 있다.
    - 심지어 `String` 의 경우 불변 타입이기 때문에 값마다 인스턴스가 생성되며 재사용된다.
        - 이 때문에 보안 이슈가 발생할수도 있다. 제발 지양하자.

---

### 아이템 63. 문자열 연결은 느리니 주의하라

- `String` 타입은 위에서 말한 것처럼 String Constant pool에 값마다 새로운 인스턴스가 생성되고 GC 된다. 많은 문자열을 연결해야 한다면 `StringBuilder` 클래스를 활용하자.

---

### 아이템 64. 객체는 인터페이스를 사용해 참조하라

- 인터페이스를 `implements` 하는 클래스가 존재한다면 인스턴스 생성 시 변수의 타입을 인터페이스로 선언하자. 고려 대상은 반환값, 변수, 필드, 모두 전부이다.
- 작은 습관만으로도 코드 변경의 유연성을 가져올 수 있다.

---

### 아이템 65. 리플렉션보다는 인터페이스를 사용하라

- 리플렉션은 자바 런타임에서 클래스를 접근할 수 있게 한다. 이는 컴파일 타임에서 갖는 타입 검사에 대한 이점을 하나도 누릴 수 없다는 것을 의미한다. 또한 성능까지 최악이다.

---

### 아이템 66. 네이티브 메서드는 신중히 사용하라

- 자바에선 C, C++로 작성된 메서드인 네이티브 메서드를 Java Native Interface라는 JNI 기술을 통해 호출할 수 있다.
    - 만약 성능 개선이 목적이라면 권장하지 않는다.
    - 본인이 일반 개발자라면 그냥 사용하지 말자.

---